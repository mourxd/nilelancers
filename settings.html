<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Settings - NileLancers</title>
    <script src="https://resource.trickle.so/vendor_lib/unpkg/react@18/umd/react.production.min.js"></script>
    <script src="https://resource.trickle.so/vendor_lib/unpkg/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://resource.trickle.so/vendor_lib/unpkg/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="auth.js"></script>
    <script type="text/babel" src="components/Header.js"></script>
    <script type="text/babel" src="components/Footer.js"></script>
    <style>
        :root { 
            --navy-blue: #001f3f; --dark-navy: #001529; --light-navy: #0a2d5a; 
            --primary-blue: #0074D9; --secondary-blue: #7FDBFF; --accent-gold: #FFD700; 
            --accent-green: #2ecc71; --text-light: #ffffff; --text-gray: #f0f0f0; 
            --glass-bg: rgba(255, 255, 255, 0.05); --glass-border: rgba(255, 255, 255, 0.1);
            --transition: all 0.4s ease; 
        }
        [data-theme="light"] {
            --navy-blue: #e2e8f0; --dark-navy: #f8fafc; --light-navy: #ffffff;
            --text-light: #1a202c; --text-gray: #4a5568;
            --primary-blue: #0056b3; --secondary-blue: #0074D9;
            --glass-bg: rgba(255, 255, 255, 0.8); --glass-border: rgba(0, 0, 0, 0.1);
        }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Montserrat', sans-serif; line-height: 1.7; color: var(--text-gray); background: linear-gradient(135deg, var(--dark-navy) 0%, var(--navy-blue) 50%, var(--light-navy) 100%); min-height: 100vh; background-attachment: fixed; }
        body[dir="rtl"] { font-family: 'Cairo', sans-serif; }
        
        /* HEADER (Shared) */
        header { background: rgba(0, 15, 40, 0.95); backdrop-filter: blur(10px); padding: 15px 0; box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5); position: sticky; top: 0; z-index: 1000; border-bottom: 2px solid var(--primary-blue); }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; transition: var(--transition); }
        .logo h1 { font-size: 28px; font-weight: 800; background: linear-gradient(to right, var(--secondary-blue), var(--accent-gold)); -webkit-background-clip: text; background-clip: text; color: transparent; margin: 0; }
        .desktop-nav ul { display: flex; align-items: center; gap: 30px; margin: 0; padding: 0; }
        .desktop-nav a { color: var(--text-light); text-decoration: none; font-weight: 600; font-size: 15px; transition: var(--transition); }
        .desktop-nav a:hover { color: var(--secondary-blue); }
        .cta-button { background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)); color: var(--dark-navy); padding: 10px 25px; border-radius: 30px; font-weight: 700; text-decoration: none; display: inline-block; border: none; cursor: pointer; transition: var(--transition); }
        .lang-btn { background: rgba(255,255,255,0.1); color: var(--accent-gold); padding: 8px 20px; border-radius: 30px; border: 1px solid var(--accent-gold); cursor: pointer; font-weight: bold; }
        
        /* SETTINGS STYLES */
        .settings-container { display: grid; grid-template-columns: 1fr 3fr; gap: 30px; }
        .settings-sidebar { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 15px; padding: 20px; height: fit-content; }
        .sidebar-item { display: block; padding: 15px; color: var(--text-gray); text-decoration: none; border-radius: 10px; margin-bottom: 10px; transition: var(--transition); cursor: pointer; }
        .sidebar-item:hover, .sidebar-item.active { background: var(--primary-blue); color: white; }
        .sidebar-item i { width: 25px; }
        
        .settings-content { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 15px; padding: 40px; }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; color: var(--accent-gold); margin-bottom: 10px; font-weight: 600; }
        .input-field { width: 100%; padding: 12px 15px; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(0,0,0,0.3); color: var(--text-light); outline: none; transition: 0.3s; }
        .input-field:focus { border-color: var(--secondary-blue); }
        textarea.input-field { resize: vertical; min-height: 100px; }
        
        @media (max-width: 768px) { .settings-container { grid-template-columns: 1fr; } }

        .mobile-menu { position: absolute; top: 100%; left: 0; right: 0; background: var(--dark-navy); border-bottom: 2px solid var(--accent-gold); padding: 20px; display: flex; flex-direction: column; gap: 15px; animation: slideDown 0.3s ease; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* NOTIFICATION STYLES */
        .notif-btn { position: relative; cursor: pointer; margin-right: 15px; color: var(--text-light); font-size: 20px; }
        .notif-badge { position: absolute; top: -5px; right: -5px; background: red; color: white; font-size: 10px; width: 16px; height: 16px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .notif-dropdown { position: absolute; top: 150%; right: 0; width: 300px; background: var(--dark-navy); border: 1px solid var(--glass-border); border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 9999; padding: 10px; display: none; }
        .notif-dropdown.show { display: block; }
        .notif-item { padding: 10px; border-bottom: 1px solid var(--glass-border); font-size: 13px; color: var(--text-gray); }
        .notif-item.unread { background: rgba(255, 215, 0, 0.1); border-left: 3px solid var(--accent-gold); }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const translations = {
            en: { nav: { home: "Home", services: "Services", saved: "Saved", dashboard: "Dashboard", wallet: "Wallet", profile: "Profile", settings: "Settings", post: "Post Job", login: "Login", logout: "Logout", signup: "Sign Up", how: "How it Works" }, title: "Account Settings", tabs: { profile: "Profile Info", security: "Security" }, lbl: { name: "Full Name", title: "Professional Title", loc: "Location", bio: "Bio", skills: "Skills (comma separated)", cur_pass: "Current Password", new_pass: "New Password", con_pass: "Confirm Password" }, btn: { save: "Save Changes", change: "Change Password" }, success: "Settings updated successfully!", footer: { desc: "The premier freelance platform connecting global talent.", quick: "Quick Links", company: "Company", contact: "Contact Us", rights: "© 2025 NileLancers." } },
            ar: { nav: { home: "الرئيسية", services: "الخدمات", saved: "المحفوظات", dashboard: "لوحة التحكم", wallet: "المحفظة", profile: "الملف الشخصي", settings: "الإعدادات", post: "أضف وظيفة", login: "تسجيل الدخول", logout: "تسجيل الخروج", signup: "إنشاء حساب", how: "كيف يعمل" }, title: "إعدادات الحساب", tabs: { profile: "المعلومات الشخصية", security: "الأمان" }, lbl: { name: "الاسم الكامل", title: "المسمى الوظيفي", loc: "الموقع", bio: "نبذة عني", skills: "المهارات (مفصولة بفاصلة)", cur_pass: "كلمة المرور الحالية", new_pass: "كلمة المرور الجديدة", con_pass: "تأكيد كلمة المرور" }, btn: { save: "حفظ التغييرات", change: "تغيير كلمة المرور" }, success: "تم تحديث الإعدادات بنجاح!", footer: { desc: "المنصة الرائدة لربط المواهب العالمية.", quick: "روابط سريعة", company: "الشركة", contact: "اتصل بنا", rights: "© 2025 نايل لانسرز." } }
        };

        function SettingsApp() {
            const [lang, setLang] = React.useState('en');
            const [activeTab, setActiveTab] = React.useState('profile');
            const [profile, setProfile] = React.useState({
                name: "Omar Sherif",
                title: "Senior Full Stack Developer",
                location: "Cairo, Egypt",
                bio: "Passionate Full Stack Developer with 5+ years of experience building scalable web applications.",
                skills: "React.js, Node.js, Tailwind CSS, MongoDB"
            });
            const [passwords, setPasswords] = React.useState({ current: '', new: '', confirm: '' });

            React.useEffect(() => { 
                const savedLang = localStorage.getItem('nile_lang') || 'en'; 
                setLang(savedLang); 
                document.dir = savedLang === 'ar' ? 'rtl' : 'ltr';
                
                const user = Auth.getUser();
                if(user) {
                    setProfile({
                        name: user.name,
                        title: user.title,
                        location: user.location,
                        bio: user.bio,
                        skills: user.skills.join(', ')
                    });
                } else {
                    window.location.href = 'login.html';
                }
            }, []);
            
            const toggleLang = () => { 
                const newLang = lang === 'en' ? 'ar' : 'en'; 
                setLang(newLang); 
                localStorage.setItem('nile_lang', newLang); 
                document.dir = newLang === 'ar' ? 'rtl' : 'ltr'; 
            };

            const handleProfileSave = (e) => {
                e.preventDefault();
                const updatedUser = Auth.updateUser({
                    name: profile.name,
                    title: profile.title,
                    location: profile.location,
                    bio: profile.bio,
                    skills: profile.skills.split(',').map(s => s.trim())
                });
                if(updatedUser) {
                    alert(translations[lang].success);
                }
            };

            const handlePasswordChange = (e) => {
                e.preventDefault();
                if(passwords.new !== passwords.confirm) {
                    alert("Passwords do not match!");
                    return;
                }
                // In a real app, you would call an API to change the password
                alert("Password changed successfully!");
                setPasswords({ current: '', new: '', confirm: '' });
            };

            const t = translations[lang];

            return (
                <div className="min-h-screen flex flex-col">
                    <Header lang={lang} t={t} toggleLang={toggleLang} activeLink="settings" />
                    
                    <div className="container py-12 flex-grow">
                        <h1 className="text-3xl font-bold text-[var(--text-light)] mb-8">{t.title}</h1>
                        
                        <div className="settings-container">
                            {/* Sidebar */}
                            <div className="settings-sidebar">
                                <div className={`sidebar-item ${activeTab === 'profile' ? 'active' : ''}`} onClick={() => setActiveTab('profile')}>
                                    <i className="fas fa-user"></i> {t.tabs.profile}
                                </div>
                                <div className={`sidebar-item ${activeTab === 'security' ? 'active' : ''}`} onClick={() => setActiveTab('security')}>
                                    <i className="fas fa-lock"></i> {t.tabs.security}
                                </div>
                            </div>

                            {/* Content */}
                            <div className="settings-content">
                                {activeTab === 'profile' ? (
                                    <form onSubmit={handleProfileSave}>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div className="form-group">
                                                <label>{t.lbl.name}</label>
                                                <input type="text" className="input-field" value={profile.name} onChange={e => setProfile({...profile, name: e.target.value})} />
                                            </div>
                                            <div className="form-group">
                                                <label>{t.lbl.title}</label>
                                                <input type="text" className="input-field" value={profile.title} onChange={e => setProfile({...profile, title: e.target.value})} />
                                            </div>
                                        </div>
                                        <div className="form-group">
                                            <label>{t.lbl.loc}</label>
                                            <input type="text" className="input-field" value={profile.location} onChange={e => setProfile({...profile, location: e.target.value})} />
                                        </div>
                                        <div className="form-group">
                                            <label>{t.lbl.bio}</label>
                                            <textarea className="input-field" value={profile.bio} onChange={e => setProfile({...profile, bio: e.target.value})}></textarea>
                                        </div>
                                        <div className="form-group">
                                            <label>{t.lbl.skills}</label>
                                            <input type="text" className="input-field" value={profile.skills} onChange={e => setProfile({...profile, skills: e.target.value})} />
                                        </div>
                                        <button type="submit" className="cta-button">{t.btn.save}</button>
                                    </form>
                                ) : (
                                    <form onSubmit={handlePasswordChange}>
                                        <div className="form-group">
                                            <label>{t.lbl.cur_pass}</label>
                                            <input type="password" className="input-field" value={passwords.current} onChange={e => setPasswords({...passwords, current: e.target.value})} />
                                        </div>
                                        <div className="form-group">
                                            <label>{t.lbl.new_pass}</label>
                                            <input type="password" className="input-field" value={passwords.new} onChange={e => setPasswords({...passwords, new: e.target.value})} />
                                        </div>
                                        <div className="form-group">
                                            <label>{t.lbl.con_pass}</label>
                                            <input type="password" className="input-field" value={passwords.confirm} onChange={e => setPasswords({...passwords, confirm: e.target.value})} />
                                        </div>
                                        <button type="submit" className="cta-button">{t.btn.change}</button>
                                    </form>
                                )}
                            </div>
                        </div>
                    </div>
                    
                    <Footer t={t} />
                </div>
            );
        }

        ReactDOM.render(<SettingsApp />, document.getElementById('root'));
    </script>
</body>
</html>